<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>doc-test</title><meta name="description" content="Documentation for doc-test"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">doc-test</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>doc-test</h2></div>
<div class="tsd-panel tsd-typography"><p><a href="https://coveralls.io/github/ULL-ESIT-INF-DSI-2223/ull-esit-inf-dsi-22-23-prct11-http-express-funko-app-alu0101327679?branch=main"><img src="https://coveralls.io/repos/github/ULL-ESIT-INF-DSI-2223/ull-esit-inf-dsi-22-23-prct11-http-express-funko-app-alu0101327679/badge.svg?branch=main" alt="Coverage Status"></a><a href="https://sonarcloud.io/summary/new_code?id=ULL-ESIT-INF-DSI-2223_ull-esit-inf-dsi-22-23-prct11-http-express-funko-app-alu0101327679"><img src="https://sonarcloud.io/api/project_badges/measure?project=ULL-ESIT-INF-DSI-2223_ull-esit-inf-dsi-22-23-prct11-http-express-funko-app-alu0101327679&metric=coverage" alt="Coverage"></a><a href="https://sonarcloud.io/summary/new_code?id=ULL-ESIT-INF-DSI-2223_ull-esit-inf-dsi-22-23-prct11-http-express-funko-app-alu0101327679"><img src="https://sonarcloud.io/api/project_badges/measure?project=ULL-ESIT-INF-DSI-2223_ull-esit-inf-dsi-22-23-prct11-http-express-funko-app-alu0101327679&metric=ncloc" alt="Lines of Code"></a></p>

<a href="#tareas-previas" id="tareas-previas" style="color: inherit; text-decoration: none;">
  <h1>Tareas previas</h1>
</a>
<ul>
<li><p>Peparar el entorno virtual para que contenga:</p>
<ol>
<li><a href="https://typedoc.org">TyeDoc</a></li>
<li><a href="https://mochajs.org">Mocha</a></li>
<li><a href="https://www.chaijs.com">Chai</a></li>
<li>Prettier</li>
<li>eslint</li>
<li><a href="https://istanbul.js.org/">Instanbull</a></li>
<li><a href="https://coveralls.io/">Coveralls</a></li>
<li><a href="https://www.npmjs.com/package/prompt-sync">Prompt-sync</a><ul>
<li><code>npm i prompt-sync</code></li>
<li><code>npm i --save-dev @types/prompt-sync</code></li>
</ul>
</li>
<li><a href="https://www.npmjs.com/package/yargs">Yargs</a></li>
<li><a href="https://www.npmjs.com/package/chalk">Chalks</a></li>
<li>GitHub Actions<ul>
<li>Pages</li>
<li>Coveralls</li>
<li>SonarCloud</li>
</ul>
</li>
<li>Entender un poco el <a href="https://nodejs.org/docs/latest-v19.x/api/fs.html">API sincrona de Node.js</a></li>
</ol>
</li>
<li><p>Repasar las <a href="https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax#links">&quot;Markdown Basics&quot;</a></p>
</li>
<li><p>Tener a mano los <a href="https://ull-esit-inf-dsi-2223.github.io/typescript-theory/">apuntes</a> principales de la asignatura</p>
</li>
<li><p>Y los <a href="https://ull-esit-inf-dsi-2223.github.io/nodejs-theory/">apuntes</a> de Node.js</p>
</li>
<li><p>Tener a mano el <a href="https://ull-esit-inf-dsi-2223.github.io/prct05-objects-classes-interfaces/">guion de la practica</a></p>
</li>
</ul>

<a href="#main" id="main" style="color: inherit; text-decoration: none;">
  <h1>Main</h1>
</a>
<p>En este caso hemos preparado un servidor HTTP que nos permite gestionar una colecci贸n de Funkos. Para ello hemos creado una clase <code>Funko</code> que representa un Funko, una clase <code>FunkoCollection</code> que representa una colecci贸n de Funkos y un servidor HTTP que nos permite gestionar dicha colecci贸n.</p>

<a href="#servidor-http" id="servidor-http" style="color: inherit; text-decoration: none;">
  <h2>Servidor HTTP</h2>
</a>
<p>En este caso, hemos creado una clase para representar el servidor HTTP. Esta clase se llama <code>FunkoServer</code> y se encuentra en el fichero <code>src/servidor/server.ts</code>. En esta clase hemos definido las propiedades <code>servidor</code> y <code>aplicacion</code>, en este caso <code>servidor</code> es una instancia de laclase <code>Server</code>, que se utiliza para escuchar las solicitudes entrantes y enviar las respuestas. Por otro lado, <code>aplicacion</code> es una instancia de la clase <code>experess.Application</code>, que se utiliza para manejar las solicitudes HTTP entrantes y definir las rutas de la aplicaci贸n.</p>
<pre><code class="language-typescript"><span class="hl-0">  </span><span class="hl-1">private</span><span class="hl-0"> </span><span class="hl-2">servidor</span><span class="hl-0">: </span><span class="hl-1">Server</span><span class="hl-0"> = </span><span class="hl-3">new</span><span class="hl-0"> </span><span class="hl-4">Server</span><span class="hl-0">();</span><br/><span class="hl-0">  </span><span class="hl-1">private</span><span class="hl-0"> </span><span class="hl-2">aplicacion</span><span class="hl-0">: </span><span class="hl-1">express</span><span class="hl-0">.</span><span class="hl-1">Application</span><span class="hl-0"> = </span><span class="hl-4">express</span><span class="hl-0">();</span>
</code></pre>
<p>En el constructor de la clase <code>FunkoServer</code> hemos definido las rutas de la aplicacion utilizando los metodos HTTP <code>get</code>, <code>post</code>, <code>delete</code> y <code>put</code> mediante la propiedad <code>aplicacion</code>y las funciones controladoras correspondientes. En este caso, hemos definido las siguientes rutas:</p>
<pre><code class="language-typescript"><span class="hl-4">constructor</span><span class="hl-0">() {</span><br/><span class="hl-0">  </span><span class="hl-3">this</span><span class="hl-0">.</span><span class="hl-1">aplicacion</span><span class="hl-0">.</span><span class="hl-4">get</span><span class="hl-0">(</span><span class="hl-5">&quot;/funkos&quot;</span><span class="hl-0">, </span><span class="hl-3">this</span><span class="hl-0">.</span><span class="hl-1">mostrarListar</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-3">this</span><span class="hl-0">.</span><span class="hl-1">aplicacion</span><span class="hl-0">.</span><span class="hl-4">post</span><span class="hl-0">(</span><span class="hl-5">&quot;/funkos&quot;</span><span class="hl-0">, </span><span class="hl-3">this</span><span class="hl-0">.</span><span class="hl-1">add</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-3">this</span><span class="hl-0">.</span><span class="hl-1">aplicacion</span><span class="hl-0">.</span><span class="hl-4">delete</span><span class="hl-0">(</span><span class="hl-5">&quot;/funkos&quot;</span><span class="hl-0">, </span><span class="hl-3">this</span><span class="hl-0">.</span><span class="hl-1">eliminar</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-3">this</span><span class="hl-0">.</span><span class="hl-1">aplicacion</span><span class="hl-0">.</span><span class="hl-4">patch</span><span class="hl-0">(</span><span class="hl-5">&quot;/funkos&quot;</span><span class="hl-0">, </span><span class="hl-3">this</span><span class="hl-0">.</span><span class="hl-1">modificar</span><span class="hl-0">);</span><br/><br/><span class="hl-0">  </span><span class="hl-3">this</span><span class="hl-0">.</span><span class="hl-1">aplicacion</span><span class="hl-0">.</span><span class="hl-4">get</span><span class="hl-0">(</span><span class="hl-5">&quot;*&quot;</span><span class="hl-0">, </span><span class="hl-3">this</span><span class="hl-0">.</span><span class="hl-1">error</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-3">this</span><span class="hl-0">.</span><span class="hl-1">aplicacion</span><span class="hl-0">.</span><span class="hl-4">post</span><span class="hl-0">(</span><span class="hl-5">&quot;*&quot;</span><span class="hl-0">, </span><span class="hl-3">this</span><span class="hl-0">.</span><span class="hl-1">error</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-3">this</span><span class="hl-0">.</span><span class="hl-1">aplicacion</span><span class="hl-0">.</span><span class="hl-4">patch</span><span class="hl-0">(</span><span class="hl-5">&quot;*&quot;</span><span class="hl-0">, </span><span class="hl-3">this</span><span class="hl-0">.</span><span class="hl-1">error</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-3">this</span><span class="hl-0">.</span><span class="hl-1">aplicacion</span><span class="hl-0">.</span><span class="hl-4">delete</span><span class="hl-0">(</span><span class="hl-5">&quot;*&quot;</span><span class="hl-0">, </span><span class="hl-3">this</span><span class="hl-0">.</span><span class="hl-1">error</span><span class="hl-0">);</span><br/><span class="hl-0">}</span>
</code></pre>
<p>Se han definido las rutas <code>&quot;/funkos&quot;</code> para las operaciones <code>GET</code>, <code>POST</code>, <code>DELETE</code> y <code>PATCH</code>. Adem谩s, se han definido las rutas <code>*</code> para las operaciones <code>GET</code>, <code>POST</code>, <code>PATCH</code> y <code>DELETE</code> para el caso de que se introduzca una ruta no definida. </p>
<p>Cuando se utilice la operacion <code>GET</code> en la ruta <code>&quot;/funkos&quot;</code> se ejecutara la funcion controladora <code>mostrarListar</code>, cuando se utilice la operacion <code>POST</code> en la ruta <code>&quot;/funkos&quot;</code> se ejecutara la funcion controladora <code>add</code>, cuando se utilice la operacion <code>DELETE</code> en la ruta <code>&quot;/funkos&quot;</code> se ejecutara la funcion controladora <code>eliminar</code> y cuando se utilice la operacion <code>PATCH</code> en la ruta <code>&quot;/funkos&quot;</code> se ejecutara la funcion controladora <code>modificar</code>. Por otro lado, cuando se utilice cualquier operacion en cualquier ruta no definida se ejecutara la funcion controladora <code>error</code>.</p>

<a href="#funciones-controladoras" id="funciones-controladoras" style="color: inherit; text-decoration: none;">
  <h3>Funciones controladoras</h3>
</a>

<a href="#mostrar-o-listar" id="mostrar-o-listar" style="color: inherit; text-decoration: none;">
  <h4>Mostrar o listar</h4>
</a>
<p>  La funci贸n comienza con una verificaci贸n de si se ha proporcionado el comando y si no se proporciona, se devuelve un error de solicitud incorrecta con el mensaje &quot;No se ha introducido el comando&quot;. Si el comando es &quot;mostrar&quot;, la funci贸n verifica si se ha proporcionado el usuario y el identificador (id) del Funko Pop. Si cualquiera de ellos falta, se devuelve un error de solicitud incorrecta correspondiente.A continuaci贸n, se crea una instancia de la clase &quot;FuncosCollection&quot; y se llama al m茅todo &quot;cargarFunkosUsuario&quot; para obtener todos los Funko Pops asociados con el usuario proporcionado en la solicitud.Luego, el c贸digo busca el Funko Pop espec铆fico que se ha solicitado mediante el m茅todo &quot;find&quot; en el arreglo &quot;funkoPops&quot; y, si se encuentra, se devuelve ese Funko Pop en la respuesta.Si el Funko Pop no se encuentra, se devuelve un error de recurso no encontrado con el mensaje &quot;No se ha encontrado el recurso&quot;.Despu茅s de esto, se llama al m茅todo &quot;guardarFunkosUsuario&quot; para guardar cualquier cambio realizado en la lista de Funko Pops del usuario en particular.Si el comando es &quot;listar&quot;, la funci贸n verifica si se ha proporcionado el usuario. Si no se proporciona, se devuelve un error de solicitud incorrecta con el mensaje &quot;No se ha introducido el usuario&quot;.Se crea una instancia de la clase &quot;FuncosCollection&quot; y se llama al m茅todo &quot;cargarFunkosUsuario&quot; para obtener todos los Funko Pops asociados con el usuario proporcionado en la solicitud.Si no se encuentra ning煤n Funko Pop asociado con el usuario, se devuelve un error de recurso no encontrado con el mensaje &quot;No se ha encontrado el recurso&quot;.De lo contrario, se devuelve una respuesta con la lista de Funko Pops del usuario.Finalmente, se llama al m茅todo &quot;guardarFunkosUsuario&quot; para guardar cualquier cambio realizado en la lista de Funko Pops del usuario en particular.</p>

<a href="#a帽adir" id="a帽adir" style="color: inherit; text-decoration: none;">
  <h5>A帽adir</h5>
</a>
<p>  La funci贸n comienza validando que se han proporcionado todos los datos necesarios para crear un nuevo objeto &quot;Funko&quot;. Si falta alguno de los datos, se env铆a una respuesta de error con un mensaje correspondiente.A continuaci贸n, se carga la colecci贸n de FunkoPops asociados al usuario proporcionado en la solicitud, y se busca si ya existe un Funko con el id proporcionado. Si existe, se env铆a una respuesta de error.Si no existe un Funko con el id proporcionado, se crea un nuevo objeto &quot;Funko&quot; con los datos proporcionados en la solicitud. Este objeto se agrega al array &quot;funkoPops&quot; y se guarda en la colecci贸n de FunkoPops asociados al usuario proporcionado en la solicitud.Finalmente, se env铆a una respuesta de 茅xito con el objeto Funko creado. La respuesta tiene un c贸digo de estado 200 y el cuerpo (body) de la respuesta contiene el objeto Funko.En resumen, esta funci贸n agrega un nuevo objeto Funko a la colecci贸n de FunkoPops asociados a un usuario en particular.</p>

<a href="#eliminar" id="eliminar" style="color: inherit; text-decoration: none;">
  <h5>Eliminar</h5>
</a>
<p>  El m茅todo comienza verificando si se proporcion贸 el usuario y el ID del recurso que se va a eliminar. Si alguno de ellos no se proporciona, se devuelve un error con un c贸digo de estado 400 y un mensaje correspondiente.A continuaci贸n, se carga la colecci贸n de FunkoPops del usuario utilizando la clase FuncosCollection y se almacenan en un array llamado &quot;funkoPops&quot;. Se busca en la matriz el FunkoPop correspondiente al ID proporcionado y se almacena en la variable &quot;funko&quot;.Si no se encuentra ning煤n FunkoPop con el ID proporcionado, se devuelve un error con un c贸digo de estado 400 y un mensaje correspondiente. En caso contrario, se elimina el FunkoPop del array &quot;funkoPops&quot; utilizando el m茅todo &quot;filter&quot; y se actualiza la colecci贸n de FunkoPops del usuario utilizando la clase FuncosCollection y el m茅todo &quot;guardarFunkosUsuario&quot;.Finalmente, se devuelve una respuesta con un mensaje de 茅xito y un c贸digo de estado 200.</p>

<a href="#modificar" id="modificar" style="color: inherit; text-decoration: none;">
  <h5>Modificar</h5>
</a>
<p>  Verifica que se hayan proporcionado todos los campos necesarios en la solicitud HTTP. Si falta alguno, la funci贸n responde con un error HTTP 400 y un mensaje de error.Carga la colecci贸n de Funkos del usuario especificado en la solicitud HTTP.Busca el Funko con el ID especificado en la solicitud HTTP en la colecci贸n de Funkos.Si no se encuentra el Funko con el ID especificado, la funci贸n responde con un error HTTP 400 y un mensaje de error.Si se encuentra el Funko con el ID especificado, la funci贸n lo elimina de la colecci贸n de Funkos.Crea un nuevo objeto Funko con los valores especificados en la solicitud HTTP.Agrega el objeto Funko modificado a la colecci贸n de Funkos.Guarda la colecci贸n de Funkos modificada en la base de datos.Responde a la solicitud HTTP con un mensaje de 茅xito.</p>

<a href="#conclusiones" id="conclusiones" style="color: inherit; text-decoration: none;">
  <h2>Conclusiones</h2>
</a>
<p>En este proyecto se ha podido comprobar que el uso de TypeScript es muy 煤til para el desarrollo de aplicaciones web, ya que permite crear aplicaciones web de forma m谩s r谩pida y eficiente. Adem谩s, se ha podido comprobar que el uso de TypeScript permite crear aplicaciones web m谩s seguras, ya que TypeScript permite definir tipos de datos para las variables y funciones, lo que permite que el c贸digo sea m谩s f谩cil de entender y de mantener. Por otro lado, se ha podido comprobar que el uso de TypeScript permite crear aplicaciones web m谩s escalables, ya que TypeScript permite crear clases y objetos, lo que permite que el c贸digo sea m谩s f谩cil de reutilizar y de mantener.</p>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">doc-<wbr/>test</a>
<ul>
<li class="tsd-kind-module"><a href="modules/funkos_comand.html">funkos/comand</a></li>
<li class="tsd-kind-module"><a href="modules/funkos_funco.html">funkos/funco</a></li>
<li class="tsd-kind-module"><a href="modules/funkos_funkoCollection.html">funkos/funko<wbr/>Collection</a></li>
<li class="tsd-kind-module"><a href="modules/funkos_genero.html">funkos/genero</a></li>
<li class="tsd-kind-module"><a href="modules/funkos_main.html">funkos/main</a></li>
<li class="tsd-kind-module"><a href="modules/funkos_tipo.html">funkos/tipo</a></li>
<li class="tsd-kind-module"><a href="modules/server.html">server</a></li></ul></li></ul></div></details></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>